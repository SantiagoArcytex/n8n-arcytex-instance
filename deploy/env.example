# ============================================
# N8N Deployment Environment Variables
# ============================================
# Copy this file to .env and fill in your values
# For Railway.app, Render.com, or Fly.io, set these as environment variables in the platform dashboard

# ============================================
# Authentication (REQUIRED)
# ============================================
# For multi-user setup, disable basic auth and use n8n's built-in user management
# Set to false to enable multi-user accounts with individual logins
N8N_BASIC_AUTH_ACTIVE=false
# Admin username (only used if N8N_BASIC_AUTH_ACTIVE=true)
N8N_BASIC_AUTH_USER=admin
# Admin password (only used if N8N_BASIC_AUTH_ACTIVE=true)
N8N_BASIC_AUTH_PASSWORD=changeme

# ============================================
# Webhook Configuration (REQUIRED)
# ============================================
# Your deployed n8n URL (will be provided by platform after deployment)
# Example: https://your-app-name.railway.app
WEBHOOK_URL=https://your-n8n-instance.com
# Host (usually same as WEBHOOK_URL domain, without protocol)
N8N_HOST=your-n8n-instance.com
# Port (usually 5678)
N8N_PORT=5678
# Protocol (http for local, https for production)
N8N_PROTOCOL=https

# ============================================
# Encryption Key (REQUIRED)
# ============================================
# Generate with: openssl rand -base64 32
# This encrypts sensitive data like credentials
N8N_ENCRYPTION_KEY=your-encryption-key-here

# ============================================
# Database Configuration
# ============================================
# PostgreSQL is recommended for multi-user setups (better performance and reliability)
# For Railway: Use Railway's PostgreSQL service and reference variables like ${{Postgres.PGHOST}}
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=${{Postgres.PGHOST}}
DB_POSTGRESDB_PORT=${{Postgres.PGPORT}}
DB_POSTGRESDB_DATABASE=${{Postgres.PGDATABASE}}
DB_POSTGRESDB_USER=${{Postgres.PGUSER}}
DB_POSTGRESDB_PASSWORD=${{Postgres.PGPASSWORD}}

# Alternative: SQLite (simpler but not recommended for multi-user)
# DB_TYPE=sqlite
# DB_SQLITE_DATABASE=/home/node/.n8n/database.sqlite

# ============================================
# Execution Settings
# ============================================
# Save execution data on error: none, all, or workflow
EXECUTIONS_DATA_SAVE_ON_ERROR=all
# Save execution data on success: none, all, or workflow
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
# Save manual execution data
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true

# ============================================
# File Storage
# ============================================
# Directory for n8n data (workflows, credentials, files)
N8N_USER_FOLDER=/home/node/.n8n

# ============================================
# Security
# ============================================
# Use secure cookies (set to true for HTTPS)
N8N_SECURE_COOKIE=true

# ============================================
# Multi-User & 2FA Configuration
# ============================================
# Enable 2FA support (users can enable 2FA individually in Settings > Personal)
N8N_MFA_ENABLED=true

# ============================================
# Optional: Timezone
# ============================================
GENERIC_TIMEZONE=UTC

# ============================================
# Optional: Workflow-specific Environment Variables
# ============================================
# These are used by your workflows
# Set these in n8n UI under Settings > Environment Variables
# or configure them here if your platform supports it

# Team email for notifications
TEAM_EMAIL=team@yourcompany.com

# OpenAI API Key (for LLM workflows)
# OPENAI_API_KEY=sk-your-openai-api-key-here

# ============================================
# SMTP Configuration (REQUIRED for Multi-User)
# ============================================
# SMTP is required for sending user invitation emails in multi-user setups
# Configure your SMTP service (Gmail, SendGrid, AWS SES, etc.)
N8N_EMAIL_MODE=smtp
N8N_SMTP_HOST=smtp.gmail.com
N8N_SMTP_PORT=587
N8N_SMTP_USER=your-email@gmail.com
N8N_SMTP_PASS=your-app-specific-password
N8N_SMTP_SECURE=false

# For Gmail: You'll need to create an App Password
# 1. Go to Google Account > Security > 2-Step Verification
# 2. Generate an App Password for "Mail"
# 3. Use that password for N8N_SMTP_PASS

# Alternative SMTP services:
# SendGrid: smtp.sendgrid.net, Port 587
# AWS SES: email-smtp.us-east-1.amazonaws.com, Port 587
# Mailgun: smtp.mailgun.org, Port 587

