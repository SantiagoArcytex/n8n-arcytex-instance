# Render.com configuration for n8n deployment
# This is a Blueprint file - you can import it directly in Render dashboard

services:
  - type: web
    name: n8n
    env: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    plan: free  # Change to 'starter' or 'standard' for always-on
    region: oregon  # Choose your preferred region
    healthCheckPath: /healthz
    envVars:
      # Authentication (multi-user mode)
      - key: N8N_BASIC_AUTH_ACTIVE
        value: "false"
      
      # Webhook Configuration (will be set automatically by Render)
      - key: N8N_PROTOCOL
        value: https
      - key: N8N_PORT
        value: "5678"
      
      # Encryption Key (set in Render dashboard)
      - key: N8N_ENCRYPTION_KEY
        value: ""
        sync: false  # Generate and set in Render dashboard
      
      # Database
      - key: DB_TYPE
        value: postgresdb
      
      # Security
      - key: N8N_SECURE_COOKIE
        value: "true"
      
      # Multi-User & 2FA
      - key: N8N_MFA_ENABLED
        value: "true"
      
      # Execution Settings
      - key: EXECUTIONS_DATA_SAVE_ON_ERROR
        value: all
      - key: EXECUTIONS_DATA_SAVE_ON_SUCCESS
        value: all
      - key: EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS
        value: "true"
      
      # File Storage
      - key: N8N_USER_FOLDER
        value: /home/node/.n8n

disks:
  - name: n8n_data
    mountPath: /home/node/.n8n
    sizeGB: 1

